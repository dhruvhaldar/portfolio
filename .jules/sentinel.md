## 2024-05-23 - Rate Limit Eviction Vulnerability
**Vulnerability:** The in-memory rate limiter (`src/utils/rateLimit.ts`) used a `Map` with LRU eviction but failed to move refreshed (expired) records to the MRU position. This allowed an attacker to flood the map with unique IPs to evict their own active session record (which remained at the LRU position), effectively resetting their request count and bypassing the rate limit.
**Learning:** In a `Map`-based LRU cache, simply updating a value with `set()` does NOT change its insertion order. To implement LRU correctly, one must `delete()` the key and then `set()` it again to move it to the end (MRU). This is a subtle but critical detail for security mechanisms relying on cache eviction.
**Prevention:** Always verify the eviction behavior of cache implementations, especially when used for security controls like rate limiting. Use explicit `delete` + `set` operations to enforce MRU ordering in JavaScript `Map`s.

## 2026-02-13 - CVE-2026-0969 (next-mdx-remote v5 Vulnerability)
**Vulnerability:** `next-mdx-remote` v5.0.0 was flagged by Vercel with CVE-2026-0969, necessitating an upgrade to v6.0.0+. The upgrade introduced breaking changes around React Server Components and prop handling.
**Learning:** When upgrading security-critical dependencies, the fix itself can introduce subtle regressions. In this case, the v6 upgrade silently broke component prop passing â€” components rendered but with empty props, producing no visible errors. This "silent failure" pattern is particularly dangerous because it passes CI/CD checks (build succeeds, no runtime errors) while producing incorrect output.
**Prevention:** After upgrading dependencies flagged for CVEs, always verify functional correctness beyond just "does it build." For MDX rendering pipelines specifically, validate that representative pages with custom components produce the expected HTML output (e.g., grep the static export for expected content strings).
